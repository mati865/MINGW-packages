diff -urN kcoreaddons-5.24.0.orig/CMakeLists.txt kcoreaddons-5.24.0/CMakeLists.txt
--- kcoreaddons-5.24.0.orig/CMakeLists.txt	2016-07-03 02:03:33.000000000 +0200
+++ kcoreaddons-5.24.0/CMakeLists.txt	2016-08-04 14:25:55.978881300 +0200
@@ -44,6 +44,10 @@
 # Generate io/config-kdirwatch.h
 configure_file(src/lib/io/config-kdirwatch.h.cmake ${CMAKE_CURRENT_BINARY_DIR}/src/lib/io/config-kdirwatch.h)
 
+# Generate config-kcoreaddons.h
+configure_file(config-kcoreaddons.h.cmake ${CMAKE_CURRENT_BINARY_DIR}/config-kcoreaddons.h)
+include_directories(${CMAKE_CURRENT_BINARY_DIR})
+
 include(ECMPoQmTools)
 
 set(KF5_VERSION "5.24.0") # handled by release scripts
diff -urN kcoreaddons-5.24.0.orig/config-kcoreaddons.h.cmake kcoreaddons-5.24.0/config-kcoreaddons.h.cmake
--- kcoreaddons-5.24.0.orig/config-kcoreaddons.h.cmake	1970-01-01 01:00:00.000000000 +0100
+++ kcoreaddons-5.24.0/config-kcoreaddons.h.cmake	2016-08-04 14:54:59.770760700 +0200
@@ -0,0 +1 @@
+#define KDE_INSTALL_DATADIR "${CMAKE_INSTALL_PREFIX}"
diff -urN kcoreaddons-5.24.0.orig/src/lib/plugin/desktopfileparser.cpp kcoreaddons-5.24.0/src/lib/plugin/desktopfileparser.cpp
--- kcoreaddons-5.24.0.orig/src/lib/plugin/desktopfileparser.cpp	2016-07-03 02:03:33.000000000 +0200
+++ kcoreaddons-5.24.0/src/lib/plugin/desktopfileparser.cpp	2016-08-04 15:02:57.435353400 +0200
@@ -24,14 +24,16 @@
 
 
 #include "desktopfileparser_p.h"
+#include "../../config-kcoreaddons.h"
 
 #include <QCache>
 #include <QDir>
 #include <QFile>
+#include <QFileInfo>
 #include <QJsonArray>
 #include <QJsonObject>
 #include <QMutex>
 #include <QStandardPaths>
 
 // in the desktoptojson binary enable debug messages by default, in the library only warning messages
 #ifdef BUILDING_DESKTOPTOJSON_TOOL
@@ -242,8 +244,22 @@
         path = QStandardPaths::locate(QStandardPaths::GenericDataLocation,
                                QStringLiteral("kservicetypes5/") + path);
         if (path.isEmpty()) {
-            qCCritical(DESKTOPPARSER) << "Could not locate service type file kservicetypes5/" << originalPath << ", tried" << QStandardPaths::standardLocations(QStandardPaths::GenericDataLocation);
-            return nullptr;
+            // MSYS2 hack
+            // we want to use /share instead of /bin/data
+            {
+                const QFileInfo msysPath(QStringLiteral("/msys32") + QStringLiteral(KDE_INSTALL_DATADIR) + QStringLiteral("/share/kservicetypes5/") + originalPath);
+                if (msysPath.exists())
+                    path = msysPath.absoluteFilePath();
+            }
+            {
+                const QFileInfo msysPath(QStringLiteral("/msys64") + QStringLiteral(KDE_INSTALL_DATADIR) + QStringLiteral("/share/kservicetypes5/") + originalPath);
+                if (msysPath.exists())
+                    path = msysPath.absoluteFilePath();
+            }
+            if (path.isEmpty()) {
+                qCCritical(DESKTOPPARSER) << "Could not locate service type file kservicetypes5/" << originalPath << ", tried" << QStandardPaths::standardLocations(QStandardPaths::GenericDataLocation);
+                return nullptr;
+            }
         }
     }
     QFile df(path);
